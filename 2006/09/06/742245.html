<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/09/06/742245.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>Why bother putting the size in the name if it's not always right?</title></head><body>
<h1>Why bother putting the size in the name if it's not always right?</h1>
<p><em>by Michael S. Kaplan, published on 2006/09/06 03:41 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2006/09/06/742245.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P>Yet another fun issue in the '.NET Framework isn't always telling the truth' files.... I was reminded of it by Aldo in the aftermath of that <STRONG><A href="http://archives.miloush.net/michkap/archive/2006/09/06/742073.html">IsSortable() == false? Well, sometimes it may be lying....</A></STRONG> post I just did. </P>
<P>Try the following code in the .NET Framework, running on both XP &gt;= SP2 and Vista: </P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px"><B><FONT face="Consolas,Courier New" size=2>
<P>using System;<BR>using System.Globalization;</P>
<P>public class Test {<BR>&nbsp;&nbsp;&nbsp; public static void Main() {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine("\nFRAMEWORK:\n");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GetSomeCultures(CultureTypes.FrameworkCultures);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine("\nWINDOWS ONLY:\n");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GetSomeCultures(CultureTypes.WindowsOnlyCultures);<BR>&nbsp;&nbsp;&nbsp; }</P>
<P>&nbsp;&nbsp;&nbsp; public static void GetSomeCultures(CultureTypes ct) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foreach(CultureInfo ci in CultureInfo.GetCultures(ct)) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(ci.ThreeLetterISOLanguageName.Length != 3) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine("&nbsp;&nbsp;&nbsp; {0} has '{1}', a ThreeLetterISOLanguageName that is not three characters long.",<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ci.Name, ci.ThreeLetterISOLanguageName);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(ci.TwoLetterISOLanguageName.Length != 2) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine("&nbsp;&nbsp;&nbsp; {0} has '{1}', a TwoLetterISOLanguageName that is not two characters long.",<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ci.Name, ci.TwoLetterISOLanguageName);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; }<BR>}</P></FONT></B></BLOCKQUOTE>
<P>There's a real kind of &nbsp;<A href="http://archives.miloush.net/michkap/archive/2005/05/08/415539.html"><B>'drive on a parkway, but park on a driveway'</B></A>&nbsp;kind of thing, huh? :-)</P>
<P>Ok, the results I get with XP SP2:</P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px"><B><FONT face="Consolas,Courier New" size=1>
<P>FRAMEWORK:</P>
<P>&nbsp;&nbsp;&nbsp; kok has 'kok', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; syr has 'syr', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; div has 'div', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; kok-IN has 'kok', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; syr-SY has 'syr', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; div-MV has 'div', a TwoLetterISOLanguageName that is not two characters long.</P>
<P>WINDOWS ONLY:</P>
<P>&nbsp;&nbsp;&nbsp; sma-NO has 'sma', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; sr-BA-Cyrl has 'sr', a ThreeLetterISOLanguageName that is not three characters long.<BR>&nbsp;&nbsp;&nbsp; zu-ZA has 'zu', a ThreeLetterISOLanguageName that is not three characters long.<BR>&nbsp;&nbsp;&nbsp; xh-ZA has 'xh', a ThreeLetterISOLanguageName that is not three characters long.<BR>&nbsp;&nbsp;&nbsp; tn-ZA has 'tn', a ThreeLetterISOLanguageName that is not three characters long.<BR>&nbsp;&nbsp;&nbsp; se-SE has 'se', a ThreeLetterISOLanguageName that is not three characters long.<BR>&nbsp;&nbsp;&nbsp; sma-SE has 'sma', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; hr-BA has 'hr', a ThreeLetterISOLanguageName that is not three characters long.<BR>&nbsp;&nbsp;&nbsp; smn-FI has 'smn', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; quz-PE has 'quz', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; se-FI has 'se', a ThreeLetterISOLanguageName that is not three characters long.<BR>&nbsp;&nbsp;&nbsp; sms-FI has 'sms', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; cy-GB has 'cy', a ThreeLetterISOLanguageName that is not three characters long.<BR>&nbsp;&nbsp;&nbsp; bs-BA-Latn has 'bs', a ThreeLetterISOLanguageName that is not three characters long.<BR>&nbsp;&nbsp;&nbsp; smj-NO has 'smj', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; mi-NZ has 'mi', a ThreeLetterISOLanguageName that is not three characters long.<BR>&nbsp;&nbsp;&nbsp; quz-EC has 'quz', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; sr-BA-Latn has 'sr', a ThreeLetterISOLanguageName that is not three characters long.<BR>&nbsp;&nbsp;&nbsp; bn-IN has 'bn', a ThreeLetterISOLanguageName that is not three characters long.<BR>&nbsp;&nbsp;&nbsp; smj-SE has 'smj', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; ml-IN has 'ml', a ThreeLetterISOLanguageName that is not three characters long.<BR>&nbsp;&nbsp;&nbsp; ns-ZA has 'ns', a ThreeLetterISOLanguageName that is not three characters long.<BR>&nbsp;&nbsp;&nbsp; quz-BO has 'quz', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; se-NO has 'se', a ThreeLetterISOLanguageName that is not three characters long.<BR>&nbsp;&nbsp;&nbsp; mt-MT has 'mt', a ThreeLetterISOLanguageName that is not three characters long.</P></FONT></B></BLOCKQUOTE>
<P>And with Vista RC1: </P>
<BLOCKQUOTE dir=ltr style="MARGIN-RIGHT: 0px"><B><FONT face="Consolas,Courier New" size=1>
<P>FRAMEWORK:</P>
<P>&nbsp;&nbsp;&nbsp; kok has 'kok', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; syr has 'syr', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; kok-IN has 'kok', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; syr-SY has 'syr', a TwoLetterISOLanguageName that is not two characters long.</P>
<P>WINDOWS ONLY:</P>
<P>&nbsp;&nbsp;&nbsp; sma-NO has 'sma', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; prs-AF has 'prs', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; qut-GT has 'qut', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; sah-RU has 'sah', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; gsw-FR has 'gsw', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; moh-CA has 'moh', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; arn-CL has 'arn', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; sma-SE has 'sma', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; quz-PE has 'quz', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; nso-ZA has 'nso', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; quz-BO has 'quz', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; sms-FI has 'sms', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; fil-PH has 'fil', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; quz-EC has 'quz', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; smj-SE has 'smj', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; smj-NO has 'smj', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; dsb-DE has 'dsb', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; smn-FI has 'smn', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; tzm-Latn-DZ has 'tzm', a TwoLetterISOLanguageName that is not two characters long.<BR>&nbsp;&nbsp;&nbsp; hsb-DE has 'hsb', a TwoLetterISOLanguageName that is not two characters long.</P></FONT></B></BLOCKQUOTE>
<P>&nbsp;Now the differences between the two cases underscore the fact that there are different causes for the times that the .NET Framework appears to be "lying" by claiming a two letter property has three letters or vice versa:</P>
<UL>
<LI>Sometimes no tag of the appropriate length exists;</LI>
<LI>A&nbsp;tag of the appropriate length might exist, but it is not specific enough;</LI>
<LI>Sometimes the data was not available (Windows Only cultures fill in the codes from GetLocaleInfo calls, but LOCALE_SISO3166CTRYNAME2 and LOCALE_SISO639LANGNAME2 did not get added until Vista);</LI>
<LI>Occasionally there was a tag but the data was not filled in correctly.</LI></UL>
<P>So all and all, a nice combination of unintentional mistakes, unavailable data, and data that does not exist. :-)</P>
<P>&nbsp;</P>
<P><FONT color=#ff1493><EM>This post brought to you by</EM> <FONT face="Mongolian Baiti" size=6><STRONG>á ¹</STRONG></FONT> <EM>(<A href="http://www.fileformat.info/info/unicode/char/1839">U+1839</A>, a.k.a. MONGOLIAN LETTER FA)</EM></FONT></P>
<hr/><p><strong>Adam</strong> on 8 Sep 2006 6:03 AM:</p><div style="margin-left: 1em">If a suitably specific tag of the appropriate length does not exist, why doesn't it just return null or throw an exception? If the data being asked for does not exist (or is not known) why return incorrect data? &quot;kok&quot; is _not_ a two letter code.<br></div>
<p><strong>Michael S. Kaplan</strong> on 8 Sep 2006 7:10 AM:</p><div style="margin-left: 1em">Hi Adam, <br><br>The choice to always return something is actually based on the usage of these fields in identifiers -- and the consequences of either throwing or returning null for a string property (or even returning a ZLS) are dire for some of those cases....</div>
<p><strong>Adam</strong> on 11 Sep 2006 8:52 AM:</p><div style="margin-left: 1em">What do you mean - their usage in identifiers? As in, in variables and methods named after them? Where is this an issue.<br><br>And surely it's only an issue if the code that uses them assumes that all languages have 2- and 3-letter ISO languages codes. Which is clearly wrong, as ISO does /not/ guarantee that all languages have 2- and 3-letter codes.<br><br>Looks like the code really wants a PreferredISOLanguageName property instead.<br><br></div>
<p><strong>Michael S. Kaplan</strong> on 11 Sep 2006 10:46 AM:</p><div style="margin-left: 1em">Hi Adam, <br><br>And that is what the two letter code is being treated as. Whether people like it or not, it is really too late to get hung up on the name. :-)</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2011/07/25 <a href="http://archives.miloush.net/michkap/archive/2011/07/25/10187633.html">Why are the short names longer than than long names?</a></p><p>2007/03/22 <a href="http://archives.miloush.net/michkap/archive/2007/03/22/1929762.html">When language codes are reported that don't actually exist</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2006/09/10/748699.html" title="How are the file names encoded?">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2006/09/06/742127.html" title="&#39;Which is almost the right logic&#39; -- WTF?">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-09">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2006-09-06">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2006/09/06/742245.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:39 GMT -->
</html>