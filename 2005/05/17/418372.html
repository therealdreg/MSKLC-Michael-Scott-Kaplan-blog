<html>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/05/17/418372.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width" /><title>The weird, weird world of the SUBLANGID</title></head><body>
<h1>The weird, weird world of the SUBLANGID</h1>
<p><em>by Michael S. Kaplan, published on 2005/05/17 02:01 -04:00, original URI: http://blogs.msdn.com/b/michkap/archive/2005/05/17/418372.aspx</em></p>
<hr/> <!-- Archival Source: ProcessPostNew -->
<P><FONT face=Tahoma>I think I may have said in the past that the SUBLANGID is an odd beast.</FONT></P>
<P><FONT face=Tahoma>They are defined in the winnt.h header file in the SDK (and ntdef.h in the DDK). Here is an excerpt of the ones there (which mostly have the value of 1 or 2):</FONT></P>
<BLOCKQUOTE dir=ltr>
<P><FONT face="Courier New" size=2><STRONG>#define SUBLANG_DEFAULT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x01&nbsp;&nbsp;&nbsp; <FONT color=#008000>// user default</FONT><BR>#define SUBLANG_SYS_DEFAULT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x02&nbsp;&nbsp;&nbsp; <FONT color=#008000>// system default</FONT><FONT color=#000000><BR></FONT></STRONG></FONT><FONT face="Courier New" size=2><STRONG>#define SUBLANG_ARABIC_SAUDI_ARABIA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x01&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Arabic (Saudi Arabia)<BR></FONT>#define SUBLANG_ARABIC_IRAQ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x02&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Arabic (Iraq)</FONT><BR>#define SUBLANG_AZERI_LATIN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x01&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Azeri (Latin)</FONT><BR>#define SUBLANG_AZERI_CYRILLIC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x02&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Azeri (Cyrillic)</FONT><BR>#define SUBLANG_CHINESE_TRADITIONAL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x01&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Chinese (Taiwan)</FONT><BR>#define SUBLANG_CHINESE_SIMPLIFIED&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x02&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Chinese (PR China)</FONT><BR>#define SUBLANG_CROATIAN_CROATIA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x01&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Croatian (Croatia)</FONT><BR>#define SUBLANG_DUTCH&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x01&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Dutch<BR></FONT>#define SUBLANG_DUTCH_BELGIAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x02&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Dutch (Belgian)<BR></FONT>#define SUBLANG_ENGLISH_US&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x01&nbsp;&nbsp;&nbsp; <FONT color=#008000>// English (USA)<BR></FONT>#define SUBLANG_ENGLISH_UK&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x02&nbsp;&nbsp;&nbsp; <FONT color=#008000>// English (UK)<BR></FONT>#define SUBLANG_FRENCH&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x01&nbsp;&nbsp;&nbsp; <FONT color=#008000>// French<BR></FONT>#define SUBLANG_FRENCH_BELGIAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x02&nbsp;&nbsp;&nbsp; <FONT color=#008000>// French (Belgian)<BR></FONT>#define SUBLANG_GERMAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x01&nbsp;&nbsp;&nbsp; <FONT color=#008000>// German<BR></FONT>#define SUBLANG_GERMAN_SWISS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x02&nbsp;&nbsp;&nbsp; <FONT color=#008000>// German (Swiss)<BR></FONT>#define SUBLANG_ITALIAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x01&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Italian<BR></FONT>#define SUBLANG_ITALIAN_SWISS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x02&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Italian (Swiss)<BR></FONT>#define SUBLANG_MALAY_MALAYSIA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x01&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Malay (Malaysia)<BR></FONT>#define SUBLANG_MALAY_BRUNEI_DARUSSALAM&nbsp; 0x02&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Malay (Brunei Darussalam)<BR></FONT>#define SUBLANG_NORWEGIAN_BOKMAL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x01&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Norwegian (Bokmal)<BR></FONT>#define SUBLANG_NORWEGIAN_NYNORSK&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x02&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Norwegian (Nyorsk)<BR></FONT>#define SUBLANG_PORTUGUESE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x02&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Portuguese<BR></FONT>#define SUBLANG_PORTUGUESE_BRAZILIAN&nbsp;&nbsp;&nbsp;&nbsp; 0x01&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Portuguese (Brazilian)<BR></FONT>#define SUBLANG_SERBIAN_LATIN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x02&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Serbian (Latin)<BR></FONT>#define SUBLANG_SERBIAN_CYRILLIC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x03&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Serbian (Cyrillic)<BR></FONT>#define SUBLANG_SPANISH&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x01&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Spanish (Castilian)<BR></FONT>#define SUBLANG_SPANISH_MEXICAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x02&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Spanish (Mexican)</FONT><BR></STRONG></FONT><FONT face="Courier New" size=2><STRONG>#define SUBLANG_SPANISH_MODERN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x03&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Spanish (Modern)<BR></FONT>#define SUBLANG_SWEDISH&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x01&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Swedish</FONT><BR>#define SUBLANG_SWEDISH_FINLAND&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x02&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Swedish (Finland)</FONT><BR>#define SUBLANG_UZBEK_LATIN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x01&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Uzbek (Latin)</FONT><BR>#define SUBLANG_UZBEK_CYRILLIC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x02&nbsp;&nbsp;&nbsp; <FONT color=#008000>// Uzbek (Cyrillic)</FONT></STRONG></FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>Some of it boils down to that evil use of the word&nbsp;<a href="http://archives.miloush.net/michkap/archive/2005/04/08/406413.html">DEFAULT</A> coming back to bite us you know where. After all, the decision of which SUBLANGID comes in what order is due to an arbitrary&nbsp;combination of alphabetical order and historical assignment. If we did not give assignments for any of the SUBLANGID==1 entries, it would imply that the first LCID in the series was somehow, you know, like the <STRONG>default</STRONG>, as opposed to the rest of the LCIDs in the series. Because in most cases, it isn't.</FONT></P>
<P><FONT face=Tahoma>Of course if you ask me, the train already left the station for the ones that have no country in them. Which is to say that&nbsp;SUBLANG_SWEDISH, SUBLANG_PORTUGUESE, SUBLANG_ITALIAN, SUBLANG_GERMAN, and SUBLANG_FRENCH already sort of says something&nbsp;along those lines by not being&nbsp;&nbsp;SUBLANG_SWEDISH_SWEDEN, SUBLANG_PORTUGUESE_PORTUGAL, SUBLANG_ITALIAN_ITALY, SUBLANG_GERMAN_GERMANY, and SUBLANG_FRENCH_FRANCE, respectively. Don't they?</FONT></P>
<P><FONT face=Tahoma>Might have saved a few lines in the header file, if nothing else....</FONT></P><FONT face=Tahoma>
<P><FONT face=Tahoma>Although sometimes the comments name a country (like Finland), other times they name a way of doing something in a country (like Mexican). So there is no need to read into patterns; there are so many different ones that you can do almost anything and still be consistent with an entry that is already there.</FONT></P>
<P>I guess we could fix the comments to be more consistent -- there is no backcompat issue if we changed the one to Finnish or the other to Mexico; the code would still compile the same way.</P>
<P>Now they do have to all be in ASCII, since the C standard did not recognize the ability to have anything other than ASCII in header files. I guess that only hurts the comment on SUBLANG_NORWEGIAN_BOKMAL, but everyone can probably pretend it is actually "<FONT color=#008000><STRONG>// Norwegian (Bokmål)</STRONG></FONT>" and call it a day. I tend to think of those comments as a lot of overhead to maintain, even if you ignore the occasional geopolitically sensitive issue....</P></FONT>
<P><FONT face=Tahoma>Also, as far as I can tell, our <EM>Right Honourable Data Lady</EM><SUP><FONT size=1>1</FONT></SUP> never really worked during the years to deal with these values directly -- she always assigned LCIDs and some dev would do the math to fill in the header file (after getting the text to use as the comment, of course -- the best protection against the aforementioned geopolitical issues is involving people who understand them!).</FONT></P>
<P><FONT face=Tahoma>Back in the Summer of 2001, I was asked by the Unicode Technical Committee to provide updated information for a comparative table of <A href="http://www.unicode.org/onlinedat/languages.html">Language Codes</A> and <A href="http://www.unicode.org/onlinedat/countries.html">Country Codes</A>. After consulting with various people at Microsoft it was decided that a list of SUBLANGID values as "country codes" was pretty much a useless idea, so we went with some country codes we had defined, instead. </FONT></P>
<P><FONT face=Tahoma>Which are not useless in and of themselves&nbsp;-- they are mostly<SUP><FONT size=1>2</FONT></SUP> just international dialing codes. Though I am guessing that if people are going to the Unicode site they are not looking for a number to dial. But they are at least more useful than a bunch of random numbers that without the context of macros like <A href="http://msdn.microsoft.com/library/en-us/intl/nls_97vo.asp">MAKELANGID</A> and information about the <a href="http://archives.miloush.net/michkap/archive/2005/03/02/383458.html">construction of LCIDs</A> serve no useful purpose ever. It is the same value as that returned by <A href="http://msdn.microsoft.com/library/en-us/intl/nls_34rz.asp">GetLocaleInfo</A>&nbsp;with the LOCALE_ICOUNTRY <A href="http://msdn.microsoft.com/library/en-us/intl/nls_8rse.asp">LCTYPE</A>. Though note the documentation for that constant gives us a cooler explanation:</FONT></P>
<BLOCKQUOTE dir=ltr>
<P><FONT face=Tahoma size=2>LOCALE_ICOUNTRY&nbsp;&nbsp;&nbsp; Country/region code, based on international phone codes, also referred to as IBM country/region codes.</FONT></P></BLOCKQUOTE>
<P><FONT face=Tahoma>So maybe we can blame IBM, especially for that "mostly" part? :-)</FONT></P>
<P><FONT face=Tahoma>Oh, never mind. It was just a thought....</FONT></P>
<P><FONT face=Tahoma color=#ff0000><EM>Which reminds me that I should be having&nbsp;someone give us new CTRY_* constants for all of the new locales in countries that we have never had locales in before. Darn,&nbsp;I had forgotten about those. At least I know I was not the only one! :-)</EM></FONT></P>
<P><FONT face=Tahoma>Some of the codes are really not needed, like SUBLANG_LITHUANIAN and&nbsp;SUBLANG_KOREAN, since they are lone reeds and are really the only one we expect for the respective languages. But then again, we did not use SUBLANG_LITHUANIAN_LITHUANIA and SUBLANG_KOREAN_KOREA so someone knew that was where we were heading?</FONT></P>
<P><FONT face=Tahoma>Though perhaps I am mistaken about that, who knows? It certainly means that the dozens of entries that are not included at all have a chance to feel slighted, though I hope they do not. I wish we could take some of them out, only we can't.</FONT></P>
<P><FONT face=Tahoma>Anyway, we have a bunch of codes defined. We cannot ever undefine them (who knows where they may be used?). But we could certainly wait to define them until/unless we need them.</FONT></P>
<P><FONT face=Tahoma>Now remember that for NLS, where there is no way to get data for neutrals, defining PRIMARYLANGID and SUBLANGID values and not LCID values is not entirely useful anyway. But those PRIMARYLANGID values are useful combined with SUBLANG_NEUTRAL for the sake of resource loading, and you can't just have those values dangling out there alone. </FONT></P>
<P><FONT face=Tahoma><STRONG>So in the end</STRONG> it all makes sense as to <EM>why</EM> they exist. But it took a long post like this one to give it enough context that one could say that. :-)</FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma size=1><EM>1 - There is a really funny story (IMHO) about how Cathy was "given" that title, but I will ask for her permission before telling it (I may ask her to tell it to me again to make sure I do not fumble it!)<BR>2 - I think they are all internationl dialing codes, other than CTRY_CANADA which is defined as 2 in winnls.h, even though their dialing code is 1.</EM></FONT></P>
<P><FONT face=Tahoma></FONT>&nbsp;</P>
<P><FONT face=Tahoma><FONT color=#ff0000><EM>This post brought to you by</EM> "<FONT size=4>ফ</FONT>" <EM>(<A href="http://www.fileformat.info/info/unicode/char/09ab/index.htm">U+09ab</A>, a.k.a. BENGALI LETTER PHA)</EM></FONT></FONT></P>
<hr/><p><a id="418720" href="#418720">#</a> <strong>Mihai</strong> on 17 May 2005 11:19 AM:</p><div style="margin-left: 1em">And still we cannot avoid the &quot;evil DEFAULT&quot; for LANG_JAPANESE :-)</div>
<p><a id="418905" href="#418905">#</a> <strong>Michael S. Kaplan</strong> on 17 May 2005 5:10 PM:</p><div style="margin-left: 1em">Yes, but it is not evil there since it IS the default. :-)</div>
<p><a id="418914" href="#418914">#</a> <strong>Michael S. Kaplan</strong> on 17 May 2005 5:15 PM:</p><div style="margin-left: 1em">Though I guess we could add the following:<br><br>#define SUBLANG_THEONEANDONLY                  0x01    // sublang when there is only one sublang to choose<br><br>for use in such cases, huh? :-)</div>
<hr/><p><em>referenced by</em></p><div style="margin-left: 1em"><p>2008/08/11 <a href="http://archives.miloush.net/michkap/archive/2008/08/11/8847467.html">The fault is ~60% functionality, ~40% documentation</a></p><p>2006/03/01 <a href="http://archives.miloush.net/michkap/archive/2006/03/01/541074.html">About that Portuguese localization question...</a></p><p>2005/08/31 <a href="http://archives.miloush.net/michkap/archive/2005/08/31/458266.html">Sometimes it *does* pay to be neutral</a></p></div><p><em>go to <a id="newer" href="http://archives.miloush.net/michkap/archive/2005/05/17/418932.html" title="Time/Date change for one of my TechEd 2005 talks">newer</a> or <a id="older" href="http://archives.miloush.net/michkap/archive/2005/05/16/418202.html" title="Making noise....">older</a> post, or back to <a href="http://archives.miloush.net/michkap/archive/index.html">index</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-05">month</a> or <a href="http://archives.miloush.net/michkap/archive/index.html#2005-05-17">day</a></em></p></body>
<!-- Mirrored from archives.miloush.net/michkap/archive/2005/05/17/418372.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 May 2017 00:42:41 GMT -->
</html>